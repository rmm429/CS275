<!doctype html>
<html>
<head>

	<meta charset="UTF-8">

	<!-- Sources for the use of jQuery, jQuery Mobile, and AJAX -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
	<link type="text/css" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css"/>
	<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
	<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

	<!-- JavaScript code -->
	<script type="text/javascript">
		
		
		//Function home()
		//Purpose: Populate a div with instructions on how to use the web page
		//Input: None
		//Output: No direct return, populates a div with content returned from an AJAX call
		function home()
		{
			
			//Location of the Nodejs /home code
			var URL = "http://localhost:8080/home";

			//Making an AJAX call to the URL for /home
			$.ajax
			({
				//Getting information
				type: "GET",
				//Data located at the url specified by URL
				url: URL,
				//Input data is of type JSON
				contentType: "application/json",
				//Sending no data
				data: "{}",
				//Data is returned as html
				dataType: "html",
				//Function that is called upon a successful AJAX request
				success: function(msg)
				{
					//Populating the div with ID "main" with the response from the server
					document.getElementById("main").innerHTML = msg;
				},
				//Function that is called upon an unsuccessful AJAX request
				error: function(jgXHR, textStatus, errorThrown)
				{
					//Alerting that there was an error
					alert("Error: " + textStatus + " " + errorThrown);
				}
			});
			
		}
		
		
		//Function calc_render()
		//Purpose: Populate a div with the html code for the factorial-summation calculator
		//Input: None
		//Output: No direct return, populates a div with content returned from an AJAX call
		function calc_render()
		{
			
			//Location of the Nodejs /calc_render code
			var URL = "http://localhost:8080/calc_render";

			//Making an AJAX call to the URL for /calc_render
			$.ajax
			({
				//Getting information
				type: "GET",
				//Data located at the url specified by URL
				url: URL,
				//Input data is of type JSON
				contentType: "application/json",
				//Sending no data
				data: "{}",
				//Data is returned as html
				dataType: "html",
				//Function that is called upon a successful AJAX request
				success: function(msg)
				{
					//Populating the div with ID "main" with the response from the server
					document.getElementById("main").innerHTML = msg;
				},
				//Function that is called upon an unsuccessful AJAX request
				error: function(jgXHR, textStatus, errorThrown)
				{
					//Alerting that there was an error
					alert("Error: " + textStatus + " " + errorThrown);
				}
			});
			
		}
		
		
		
		//Function fact_or_sum()
		//Purpose: Determine whether or not to call the calc_fact() or calc_sum() function
		//Input: None
		//Output: No direct return value, but either the function calc_fact() or calc_sum() will be called with input "val"
		function fact_or_sum()
		{
			
			//Getting the integer in the text box specified by ID "n"
			var val = parseInt(document.getElementById("n").value);
			//Creating a variable for the selection box specified by ID "fact_sum"
			var fact_sum_select = document.getElementById("fact_sum");
			//Getting the selection option from the selection box specified by variable "fact_sum_select"
			var selection = fact_sum_select.options[fact_sum_select.selectedIndex].value;
			
			//If the input value is not an integer or a negative integer
			if (isNaN(val) || val < 0)
			{
				//Alert the user to enter a valid integer
				alert("Please enter a valid integer!");
			}
			//If the input value is a non-negative integer
			else
			{
				//If the value of selection is "fact"
				if (selection == "fact")
				{
					//Call the function calc_fact() and send the input value
					calc_fact(val);
				}
				//If the value of selection is "sum"
				else if (selection == "sum")
				{
					//Call the function calc_sum() and send the input value
					calc_sum(val);
				}
			}
		}
		
		
		
		//Function fact()
		//Purpose: Calculate the factorial of a number
		//Input: A non-negative integer n
		//Output: No direct return value, but the div "calc_answer" is populated with the factorial
		function calc_fact(n)
		{
			
			//Location of the Nodejs /calc_fact code
			var URL = "http://localhost:8080/calc_fact";
			//Creating a JSON with the key "input" and the value n
			var input_json = { input:n };
			
			//Making an AJAX call to the URL for /calc_fact
			$.ajax
			({
				//Getting information
				type: "GET",
				//Data located at the url specified by URL
				url: URL,
				//Input data is of type JSON
				contentType: "application/json",
				//The data contained in "input_json" is sent
				data: input_json,
				//Data is returned as html
				dataType: "html",
				//Function that is called upon a successful AJAX request
				success: function(msg)
				{
					//Populating the div with ID "calc_answer" with a vertical break and the response from the server
					document.getElementById("calc_answer").innerHTML = "<br>" + msg;
				},
				//Function that is called upon an unsuccessful AJAX request
				error: function(jgXHR, textStatus, errorThrown)
				{
					//Alerting that there was an error
					alert("Error: " + textStatus + " " + errorThrown);
				}
			});
		}
		
		
		
		
		//Function sum()
		//Purpose: Calculate the summation of a number
		//Input: A non-negative integer n
		//Output: No direct return value, but the div "calc_answer" is populated with the summation
		function calc_sum(n)
		{
			
			//Location of the Nodejs /calc_sum code
			var URL = "http://localhost:8080/calc_sum";
			//Creating a JSON with the key "input" and the value n
			var input_json = { input:n };
			
			//Making an AJAX call to the URL for /calc_sum
			$.ajax
			({
				//Getting information
				type: "GET",
				//Data located at the url specified by URL
				url: URL,
				//Input data is of type JSON
				contentType: "application/json",
				//The data contained in "input_json" is sent
				data: input_json,
				//Data is returned as html
				dataType: "html",
				//Function that is called upon a successful AJAX request
				success: function(msg)
				{
					//Populating the div with ID "calc_answer" with a vertical break and the response from the server
					document.getElementById("calc_answer").innerHTML = "<br>" + msg;
				},
				//Function that is called upon an unsuccessful AJAX request
				error: function(jgXHR, textStatus, errorThrown)
				{
					//Alerting that there was an error
					alert("Error: " + textStatus + " " + errorThrown);
				}
			});
		}
		
		
		
		
		//Function weat_render()
		//Purpose: Populate a div with the html code for the weather displayer
		//Input: None
		//Output: No direct return, populates a div with content returned from an AJAX call
		function weat_render()
		{
			
			//Location of the Nodejs /weat_render code
			var URL = "http://localhost:8080/weat_render";

			//Making an AJAX call to the URL for /weat_render
			$.ajax
			({
				//Getting information
				type: "GET",
				//Data located at the url specified by URL
				url: URL,
				//Input data is of type JSON
				contentType: "application/json",
				//Sending no data
				data: "{}",
				//Data is returned as html
				dataType: "html",
				//Function that is called upon a successful AJAX request
				success: function(msg)
				{
					//Populating the div with ID "main" with the response from the server
					document.getElementById("main").innerHTML = msg;
				},
				//Function that is called upon an unsuccessful AJAX request
				error: function(jgXHR, textStatus, errorThrown)
				{
					//Alerting that there was an error
					alert("Error: " + textStatus + " " + errorThrown);
				}
			});
			
		}
		
		
		
		//Function weat_zip()
		//Purpose: Gets the current zip code
		//Input: None
		//Output: No direct return, gets the current zip code and sends it to the weat_get() function
		function weat_zip()
		{
			
			//Location of the Nodejs /weat_zip code
			var URL = "http://localhost:8080/weat_zip";

			//Making an AJAX call to the URL for /weat_zip
			$.ajax
			({
				//Getting information
				type: "GET",
				//Data located at the url specified by URL
				url: URL,
				//Input data is of type JSON
				contentType: "application/json",
				//Sending no data
				data: "{}",
				//Data is returned as html
				dataType: "html",
				//Function that is called upon a successful AJAX request
				success: function(msg)
				{
					//Setting the variable "zip" equal to the return message
					var zip = msg;
					
					//Calling the function weat_get() and sending zip to it
					weat_get(zip);
					
				},
				//Function that is called upon an unsuccessful AJAX request
				error: function(jgXHR, textStatus, errorThrown)
				{
					//Alerting that there was an error
					alert("Error: " + textStatus + " " + errorThrown);
				}
			});
			
		}
		
		
		
		//Function weat_get()
		//Purpose: Gets the hourly weather and places it in an empty div
		//Input: None
		//Output: No direct return, gets the hourly weather and places it in the div specified by ID "display_weather"
		function weat_get(zip)
		{
			
			//Location of the Nodejs /weat_get code
			var URL = "http://localhost:8080/weat_get";
			//Creating a JSON with the key "zipcode" and the value zip
			var input_json = { zipcode: zip };
			
			//Making an AJAX call to the URL for /weat_get
			$.ajax
			({
				//Getting information
				type: "GET",
				//Data located at the url specified by URL
				url: URL,
				//Input data is of type JSON
				contentType: "application/json",
				//The data contained in "input_json" is sent
				data: input_json,
				//Data is returned as html
				dataType: "html",
				//Function that is called upon a successful AJAX request
				success: function(msg)
				{
					//Populating the div with ID "display_weather" with a vertical break and the response from the server
					document.getElementById("display_weather").innerHTML += "<br>" + msg;
					
				},
				//Function that is called upon an unsuccessful AJAX request
				error: function(jgXHR, textStatus, errorThrown)
				{
					//Alerting that there was an error
					alert("Error: " + textStatus + " " + errorThrown);
				}
			});
			
		}
		
		
		
		
	</script>

	<!-- Title that is displayed in the tab -->
	<title>Richard Mangerie Lab 4</title>
	
</head>

<body>

	<div data-role="page" id="pageone">
		
		<!-- Creating a panel -->
		<div data-role="panel" id="mypanel">
			<!-- Panel button that calls the JavsScript function "home()" when pressed -->
			<a data-rel="close" onClick="home()" class="ui-alt-icon ui-btn ui-shadow ui-corner-all ui-icon-home ui-btn-icon-left">Home</a>
			<!-- Panel button that calls the JavaScript function "calc_render()" when pressed -->
			<a data-rel="close" onClick="calc_render()" class="ui-alt-icon ui-btn ui-shadow ui-corner-all ui-icon-grid ui-btn-icon-left">Calculator</a>
			<!-- Panel button that calls the JavaScript function "weat_render()" when pressed -->
			<a data-rel="close" onClick="weat_render()" class="ui-alt-icon ui-btn ui-shadow ui-corner-all ui-icon-cloud ui-btn-icon-left">Weather</a>
			<!-- Panel button that closes the panel -->
			<a data-rel="close" class="ui-alt-icon ui-btn ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-left">Close Menu</a>
		</div>

		<!-- Div that contains the header of the page -->
		<div data-role="header" id="myheader">
			<!-- Placing a button called "Menu" in the header that will display the panel -->
			<a href="#mypanel">Menu</a>
			<!-- Header title -->
			<h1>Assignment 4</h1>
		</div>

		<!-- Div that contains the main content of the page -->
		<div id="main" data-role="main" class="ui-content">
			<!-- Initially populating the div with instructions on how to use the web page -->
			<center><h2>Instructions</h2></center>
			<center><p>To access content, click the "Menu" button in the top left corner, which will open a menu.</p></center>
			<center><p>There are four buttons in the menu: "Home," "Calculator," "Weather," and "Close Menu."</p></center>
			<center><p>The "Home" button will populate the page with the instructions you are reading currently.</p></center>
			<center><p>The "Calculator" button will populate the page with a calcuator to caculate the Factorial or Summation of a provied positive integer.</p></center>
			<center><p>The "Weather" button will populate the page with the hourly weather in your current location.</p></center>
			<center><p>The "Close Menu" button will close the menu and will fully display whatever content was already on the page.</p></center>
		</div>

		<!-- Div that contains the footer of the page -->
		<div data-role="footer">
			<!-- Footer title -->
			<h1>Richard Mangerie</h1>
		</div>

	</div> 


</body>
</html>
